namespace Miruken.Mvc.Console.Test
{
    using Microsoft.VisualStudio.TestTools.UnitTesting;

    [TestClass]
    public class DockPanelTopTests: TestBase
    {
        [TestMethod]
        public void DockTopStretch()
        {
            Assert(HorizontalAlignment.Stretch, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
            });
        }

        [TestMethod]
        public void DockTopUnknown()
        {
            Assert(HorizontalAlignment.Unknown, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
            });
        }

        [TestMethod]
        public void DockTopLeft()
        {
            Assert(HorizontalAlignment.Left, new []
            {
                new [] {'-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' '},
                new [] {'|', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' '},
                new [] {'-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' '},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
            });
        }

        [TestMethod]
        public void DockTopCenter()
        {
            Assert(HorizontalAlignment.Center, new []
            {
                new [] {' ', ' ', '-', '-', '-', '-', '-', '-', ' ', ' '},
                new [] {' ', ' ', '|', ' ', ' ', ' ', ' ', '|', ' ', ' '},
                new [] {' ', ' ', '-', '-', '-', '-', '-', '-', ' ', ' '},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
            });
        }

        [TestMethod]
        public void DockTopRight()
        {
            Assert(HorizontalAlignment.Right, new []
            {
                new [] {' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-'},
                new [] {' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', '|'},
                new [] {' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
            });
        }

        public void Assert(HorizontalAlignment horizontalAlignment, char[][] expected)
        {
            var main = new DockPanel()
            {
                Size = new Size(10, 10)
            };
            var header = new DockChild()
            {
                Element = new DockPanel {
                    Border              = new Thickness(1),
                    HorizontalAlignment = horizontalAlignment,
                    Size                = new Size(5, 5)
                },
                Dock = Dock.Top,
                Percent = 30
            };

            var content = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Fill
            };

            main.Add(header);
            main.Add(content);

            var cells = Render(main.Size, main);

            AssertCellsAreEquivelant(expected, cells);
        }

        [TestMethod]
        public void Centering()
        {
            var main = new DockPanel()
            {
                Size = new Size(5, 5)
            };
            main.Add(new DockChild()
            {
                Element = new DockPanel {
                    Border              = new Thickness(1),
                    HorizontalAlignment = HorizontalAlignment.Center,
                    Size                = new Size(3, 3)
                },
                Dock = Dock.Top,
                Percent = 60
            });

            AssertCellsAreEquivelant(new []
            {
                new[] {' ','-','-','-',' '},
                new[] {' ','|',' ','|',' '},
                new[] {' ','-','-','-',' '},
                new[] {' ',' ',' ',' ',' '},
                new[] {' ',' ',' ',' ',' '}
            }, Render(main.Size, main));
        }

    }

    [TestClass]
    public class DockPanelBottomTests: TestBase
    {
        [TestMethod]
        public void DockBottomStretch()
        {
            Assert(HorizontalAlignment.Stretch, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'}
            });
        }

        [TestMethod]
        public void DockBottomUnknown()
        {
            Assert(HorizontalAlignment.Unknown, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'}
            });
        }

        [TestMethod]
        public void DockBottomLeft()
        {
            Assert(HorizontalAlignment.Left, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' '},
                new [] {'|', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' '},
                new [] {'-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' '}
            });
        }

        [TestMethod]
        public void DockBottomCenter()
        {
            Assert(HorizontalAlignment.Center, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {' ', ' ', '-', '-', '-', '-', '-', '-', ' ', ' '},
                new [] {' ', ' ', '|', ' ', ' ', ' ', ' ', '|', ' ', ' '},
                new [] {' ', ' ', '-', '-', '-', '-', '-', '-', ' ', ' '}
            });
        }

        [TestMethod]
        public void DockBottomRight()
        {
            Assert(HorizontalAlignment.Right, new []
            {
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'},
                new [] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                new [] {' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-'},
                new [] {' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', '|'},
                new [] {' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-'}
            });
        }

        public void Assert(HorizontalAlignment horizontalAlignment, char[][] expected)
        {
            var main = new DockPanel()
            {
                Size = new Size(10, 10)
            };
            var header = new DockChild()
            {
                Element = new DockPanel {
                    Border              = new Thickness(1),
                    HorizontalAlignment = horizontalAlignment,
                    Size                = new Size(5, 5)
                },
                Dock = Dock.Bottom,
                Percent = 30
            };

            var content = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Fill
            };

            main.Add(header);
            main.Add(content);

            var cells = Render(main.Size, main);

            AssertCellsAreEquivelant(expected, cells);
        }

    }

    [TestClass]
    public class DockPanelRightTests : TestBase
    {
        [TestMethod]
        public void DockRightStretch()
        {
            Assert(VerticalAlignment.Stretch, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockRightUnknown()
        {
            Assert(VerticalAlignment.Unknown, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockRightTop()
        {
            Assert(VerticalAlignment.Top, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' '},
                   });
        }

        [TestMethod]
        public void DockRightCenter()
        {
            Assert(VerticalAlignment.Center, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' '},
                   });
        }

        [TestMethod]
        public void DockRightBottom()
        {
            Assert(VerticalAlignment.Bottom, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' '},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '-', '-', '-'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'|', ' ', ' ', ' ', ' ', ' ', '|', '|', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        public void Assert(VerticalAlignment verticalAlignment, char[][] expected)
        {
            var main = new DockPanel()
            {
                Size = new Size(10, 10)
            };
            var header = new DockChild()
            {
                Element = new DockPanel
                {
                    Border = new Thickness(1),
                    VerticalAlignment = verticalAlignment,
                    Size = new Size(5, 5)
                },
                Dock = Dock.Right,
                Percent = 30
            };

            var content = new DockChild()
            {
                Element = new DockPanel
                {
                    Border = new Thickness(1)
                },
                Dock = Dock.Fill
            };

            main.Add(header);
            main.Add(content);

            var cells = Render(main.Size, main);

            AssertCellsAreEquivelant(expected, cells);
        }
    }

    [TestClass]
    public class DockPanelLeftTests : TestBase
    {
        [TestMethod]
        public void DockLeftStretch()
        {
            Assert(VerticalAlignment.Stretch, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockLeftUnknown()
        {
            Assert(VerticalAlignment.Unknown, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockLeftTop()
        {
            Assert(VerticalAlignment.Top, new[]
                   {
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockTopCenter()
        {
            Assert(VerticalAlignment.Center, new[]
                   {
                       new[] {' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        [TestMethod]
        public void DockLeftBottom()
        {
            Assert(VerticalAlignment.Bottom, new[]
                   {
                       new[] {' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'|', ' ', '|', '|', ' ', ' ', ' ', ' ', ' ', '|'},
                       new[] {'-', '-', '-', '-', '-', '-', '-', '-', '-', '-'},
                   });
        }

        public void Assert(VerticalAlignment verticalAlignment, char[][] expected)
        {
            var main = new DockPanel()
            {
                Size = new Size(10, 10)
            };
            var header = new DockChild()
            {
                Element = new DockPanel
                {
                    Border = new Thickness(1),
                    VerticalAlignment = verticalAlignment,
                    Size = new Size(5, 5)
                },
                Dock = Dock.Left,
                Percent = 30
            };

            var content = new DockChild()
            {
                Element = new DockPanel
                {
                    Border = new Thickness(1)
                },
                Dock = Dock.Fill
            };

            main.Add(header);
            main.Add(content);

            var cells = Render(main.Size, main);

            AssertCellsAreEquivelant(expected, cells);
        }
    }

    [TestClass]
    public class DockPanelMultipleDockingsTests: TestBase
    {
        [TestMethod]
        public void SupportsMultipleChildren()
        {
            Assert(new []
            {
                new [] {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
                new [] {'|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
                new [] {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
                new [] {'|',' ',' ',' ',' ','|','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'|',' ',' ',' ',' ','|','|',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|'},
                new [] {'-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-','-'}
            });
        }

        public void Assert(char[][] expected)
        {
            var main = new DockPanel()
            {
                Size = new Size(30, 30)
            };
            var header = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Top,
                Percent = 20
            };

            var leftPanel = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Left,
                Percent = 20
            };

            var footer = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Bottom,
                Percent = 20
            };

            var rightPanel = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1)
                },
                Dock = Dock.Right,
                Percent = 30
            };

            var middleLeft = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1),

                },
                Dock = Dock.Left,
                Percent = 50
            };

            var middleRight = new DockChild()
            {
                Element = new DockPanel {
                    Border = new Thickness(1),
                },
                Dock = Dock.Fill
            };

            main.Add(header);
            main.Add(leftPanel);
            main.Add(footer);
            main.Add(rightPanel);
            main.Add(middleLeft);
            main.Add(middleRight);

            var cells = Render(main.Size, main);

            AssertCellsAreEquivelant(expected, cells);
        }

    }
}
